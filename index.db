-- index.sql
-- Demo schema + data for index.db üóÑÔ∏è

-- Drop tables if they exist
DROP TABLE IF EXISTS users;
DROP TABLE IF EXISTS projects;

-- Users table
CREATE TABLE users (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  username TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  joined_at TEXT DEFAULT CURRENT_TIMESTAMP
);

-- Projects table
CREATE TABLE projects (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL,
  language TEXT,
  stars INTEGER DEFAULT 0,
  owner_id INTEGER,
  FOREIGN KEY (owner_id) REFERENCES users(id)
);

-- Insert demo users
INSERT INTO users (username, email) VALUES
("alice", "alice@example.com"),
("bob", "bob@example.com"),
("charlie", "charlie@example.com"),
("dora", "dora@example.com"),
("eve", "eve@example.com");

-- Insert demo projects
INSERT INTO projects (name, language, stars, owner_id) VALUES
("Awesome Icons", "Markdown", 999, 1),
("Hello World", "C", 120, 2),
("Web App", "JavaScript", 450, 2),
("Data Cruncher", "Python", 670, 3),
("Zoo App", "Dart", 210, 4),
("Smart Contract", "Solidity", 220, 5),
("Config Master", "YAML", 80, 3),
("Cloud Runner", "Terraform", 150, 1),
("Game Engine", "C++", 320, 2),
("AI Bot", "Go", 530, 4);

-- Query demo
SELECT u.username, p.name, p.language, p.stars
FROM users u
JOIN projects p ON u.id = p.owner_id
ORDER BY p.stars DESC;
